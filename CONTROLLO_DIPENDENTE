mODULE CONTROLLO_DIPENDENTE.
IF NOT ZRS002-REF_SOCIETA IS INITIAL
AND NOT ZRS002-REF_CLASSE IS INITIAL
AND NOT ZRS002-REF_MATRICOLA IS INITIAL.
         IF NOT ZRS002-SOCIETA IS INITIAL
         AND NOT ZRS002-CLASSE IS INITIAL
         AND NOT ZRS002-MATRICOLA IS INITIAL.
         SELECT SINGLE * FROM ZRADICE02 WHERE 
                                  SOCIETA = ZRS002-SOCIETA 
                        AND CLASSE  = ZRS002-CLASSE
                       AND MATRICOLA = ZRS002-MATRICOLA.
                       IF SY-SUBRC = 0.
                            MESSAGE E150(ZTMP) WITH ZRS002-SOCIETA CLASSE MATRICOLA.
                       ELSE.
                            SET SCREEN 4005.
                            LEAVE SCREEN.
                       ENDIF.
         ENDIF.
 ELSEIF   ZRS002-SOCIETA,  ZRS002-CLASSE,  ZRS002-MATRICOLA IS INITIAL.
                MESSAGE ID 'ZTMP'  TYPE 'S'  NUMBER '030'.
 ELSE.
        SELECT SINGLE * FROM ZTABCLASSE02 WHERE CLASSE = ZRADICE02-CLASSE.	
        SELECT SINGLE * FROM ZTABCLASSE02 WHERE SOCIETA = T001-SOCIETA.
        SELECT SINGLE * FROM ZTABCLASSE02 WHERE MATRICOLA = ZRADICE02-  MATRICOLA.
   IF SY-SUBRC=0.
     MESSAGE ID 150 WITH SOCIETA, CLASSE, MATRICOLA.
  ELSE.
     ZMRADICE02-MATRICOLA = ZRS002-MATRICOLA.
     ZMRADICE02-CLASSE          = ZRS002-CLASSE.
     ZMRADICE02-SOCIETA        = ZRS002-SOCIETA.
     SET SCREEN 4005.
     LEAVE SCREEN.
 ENDIF.
ENDIF.
