IF  ZRS002-REF_SOCIETA’  IS  INITIAL  AND ZRS002-REF_CLASSE  IS INITIAL  AND
     ZRS002-REF_MATRICOLA  IS INITIAL.
ELSEIF  NOT ZRS002-REF_SOCIETA’  IS INITIAL AND NOT ZRS002-REF_CLASSE IS   INITIAL AND NOT ZRS002-REF_MATRICOLA  IS INITIAL.
ELSE
    MESSAGE  ID ‘ZTMP' TYPE 'S’  NUMBER ‘023’
    SET SCREEN SY-DYNNR.
    LEAVE SCREEN.
ENDIF.
CHECK NOT ZRS002-REF_SOCIETA’  IS INITIAL AND NOT ZRS002-REF_CLASSE IS INITIAL AND NOT ZRS002-REF_MATRICOLA  IS INITIAL.
IF ZRS002-MATRICOLA IS INITIAL .
    MESSAGE ID ‘ZTMP' TYPE 'S' NUMBER '038'.
    SET SCREEN SY-DYNNR.
    LEAVE SCREEN.
ENDIF.
SELECT SINGLE * FROM ZRADICE02  WHERE SOCIETA’ =  ZRS002-REF_SOCIETA'
                                                                             AND CLASSE =   ZRS002-REF_CLASSE 
                                                                       AND MATRICOLA = ZRS002-   REF_MATRICOLA.
       IF SY-SUBRC = 0.
           ZRADICE002-MATRICOLA = ZRS002-MATRICOLA.
           SELECT SINGLE * FROM ZTABCLASSE02  WHERE CLASSE = ZRADICE002-CLASSE.
SELECT SINGLE * FROM T001 WHERE BUKRS = ZRADICE002-SOCIETA’.
                ZRS002-REF_BUTXT = TOO1-BUTXT.
                ZRS002-REF_DESCRIZ = ZTABCLASSE02-DESCRIZIONE.
                ZRS002-REF_COGNOME = ZRADICE02-COGNOMENOME.
             ELSE
                   MESSAGE ID ‘ZTMP' TYPE 'S' N031
                            WITH ZRS002-REF_SOC
                                       ZRS002-REF_CLASSI
                                       ZRS002-REF_MAT.
                            SET SCREEN SY-DYNNR.
                            LEAVE SCREEN.
         ENDIF.
